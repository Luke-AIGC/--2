# 🎯 卡片重构行动方案 - 初中生抽卡系统改造

**创建时间**: 2025年10月10日 10:45
**项目**: 课堂问答抽卡系统
**目标**: 优化卡片样式，适配初中生班级使用场景

---

## 📋 需求分析总结

### 核心改造需求

1. **头像优化**: 增大尺寸，支持自动圆形裁剪
2. **内容调整**: 学号改为"华夏中学"，调整显示框大小
3. **稀有度重设计**: 替换为适合初中生的有趣文字标识
4. **智能命名**: 自动读取图片文件名作为学生姓名

---

## 🗂️ 涉及文件及关联关系

### 1️⃣ **核心样式文件** - `css/styles.css`

**作用**: 控制卡片外观、尺寸、布局、头像裁剪**需要修改**:

- 头像尺寸和圆形裁剪样式
- "华夏中学"文字框的大小调整
- 稀有度标识的样式适配

### 2️⃣ **卡片生成文件** - `js/modules/UIRenderer.js`

**作用**: 动态创建每张卡片的HTML内容**需要修改**:

- 替换稀有度文字（星星→有趣文字）
- 将学号改为"华夏中学"
- 调整头像尺寸参数

### 3️⃣ **学生数据文件** - `js/modules/StudentDataManager.js`

**作用**: 管理学生数据，包括姓名、头像路径等**需要修改**:

- 添加自动读取图片文件名功能
- 建立文件名到学生姓名的映射

---

## 🔧 具体实施步骤

### 第一步：头像自动裁剪优化

**文件**: `css/styles.css`**修改点**:

- 将 `.avatar` 和 `.result-avatar` 的 `object-fit: cover` 保留（自动裁剪关键）
- 增大头像尺寸（从80px→100px，结果卡片从140px→160px）
- 确保 `border-radius: 50%` 已存在（圆形裁剪）

### 第二步：文字内容调整

**文件**: `js/modules/UIRenderer.js`**修改点**:

- 找到 `createCardHTML()` 方法
- 将学号显示改为"华夏中学"
- 调整文字容器大小以适应"华夏中学"四个字

### 第三步：稀有度趣味化改造

**文件**: `js/modules/UIRenderer.js`**修改点**:

- 替换 `getRarityText()` 和 `getRarityStars()` 方法
- 设计适合初中生的趣味等级：
  - 🏅 幸运星 - 金色标签
  - 🌟 闪亮登 - 蓝色标签
  - 🎈 惊喜到 - 绿色标签
  - 😊 快乐宝 - 橙色标签
  - ⭐ 好朋友 - 银色标签

### 第四步：智能文件名读取

**文件**: `js/modules/StudentDataManager.js`**新增功能**:

- 创建图片文件名扫描功能
- 自动提取文件名（去掉扩展名）作为学生姓名
- 建立 `姓名 -> 头像路径` 的映射关系

---

## ⚠️ 重要注意事项

### ✅ 可以安全修改的

- CSS样式中的尺寸、颜色、间距
- 卡片显示的文字内容
- 头像的显示尺寸和裁剪方式
- 稀有度的显示文字

### ⚠️ 需要联动修改的

- **头像尺寸变化** → 需要同时调整 `.avatar` 和 `.result-avatar`
- **文字长度变化** → "华夏中学"比学号长，需要调整文字容器宽度
- **稀有度文字长度** → 趣味文字可能比星星占位多，需要测试显示效果

### ❌ 不建议修改的

- 卡片的基本布局算法（扇形排列）
- 动画的核心时间参数（可能影响用户体验）
- 文件路径结构（保持项目组织清晰）

---

## 🧪 测试验证计划

### 阶段1：样式测试

1. 放一张测试头像，验证圆形裁剪效果
2. 检查"华夏中学"四个字是否显示完整
3. 确认头像尺寸符合预期

### 阶段2：内容测试

1. 测试不同长度的学生姓名显示效果
2. 验证稀有度趣味文字的显示
3. 检查响应式效果（手机/电脑）

### 阶段3：自动化测试

1. 批量放入49张头像图片
2. 验证自动命名功能是否正常工作
3. 检查是否有重名处理机制

---

## 🚀 执行优先级建议

### 高优先级（先完成）

1. 头像自动裁剪和尺寸调整
2. 学号改为"华夏中学"

### 中优先级（次完成）

3. 稀有度趣味文字设计
4. 智能文件名读取

### 低优先级（最后优化）

5. 细节样式微调
6. 响应式效果优化

---

## 💡 设计建议

### 稀有度标签推荐方案

#### 方案A：班级职务系列

- 🏆 "班长" - 金色标签
- 📚 "学习委员" - 蓝色标签
- ⚽ "体育委员" - 绿色标签
- 🎨 "文艺委员" - 紫色标签
- 👥 "普通同学" - 银色标签

#### 方案B：个性特点系列

- ☀️ "小太阳" - 橙色标签
- 🧠 "智多星" - 蓝色标签
- 😄 "开心果" - 黄色标签
- 🌸 "安静美" - 粉色标签
- ⚡ "活力王" - 红色标签

### 头像命名规范

- **格式**: `姓名.jpg` 或 `姓名.png`
- **示例**: `张三.jpg`、`李四.png`
- **注意**: 确保文件名不包含特殊字符

---

## 📝 实施记录

- [ ] 第一步：头像样式优化
- [ ] 第二步：文字内容调整
- [ ] 第三步：稀有度改造
- [ ] 第四步：智能命名功能
- [ ] 测试验证
- [ ] 最终优化

---

**备注**: 本方案基于现有代码结构设计，确保改动最小化的同时实现功能优化。所有修改都会保持代码的可维护性和扩展性。
