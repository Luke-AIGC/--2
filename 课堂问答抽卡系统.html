<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>课堂问答抽卡系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .card {
      width: 120px;
      height: 160px;
      position: absolute;
      transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      cursor: pointer;
      transform-style: preserve-3d;
    }
    
    .card:hover {
      transform: translateY(-10px) rotate(var(--rotation)) !important;
    }
    
    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    
    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }
    
    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 16px rgba(0,0,0,0.4);
      border: 3px solid rgba(255,255,255,0.3);
    }
    
    .card-front {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .card-back {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      transform: rotateY(180deg);
      padding: 8px;
    }
    
    .selected-card {
      animation: drawCard 1s ease-out forwards;
      z-index: 1000 !important;
    }
    
    @keyframes drawCard {
      0% {
        transform: translate(0, 0) scale(1) rotate(var(--rotation));
      }
      50% {
        transform: translate(0, -100px) scale(1.2) rotate(0deg);
      }
      100% {
        transform: translate(0, 0) scale(2) rotate(0deg);
      }
    }
    
    .cards-container {
      position: relative;
      width: 100%;
      height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .drawn-display {
      min-height: 280px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .result-card {
      width: 280px;
      height: 380px;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.4);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      animation: showResult 0.6s ease-out;
      border: 4px solid rgba(255,255,255,0.8);
      position: relative;
      overflow: hidden;
    }
    
    .result-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 120px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      z-index: 0;
    }
    
    @keyframes showResult {
      from {
        opacity: 0;
        transform: scale(0.8) rotateY(90deg);
      }
      to {
        opacity: 1;
        transform: scale(1) rotateY(0deg);
      }
    }
    
    .avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid white;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    .result-avatar {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      object-fit: cover;
      border: 5px solid white;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      z-index: 1;
      margin-top: 20px;
    }
    
    .star-decoration {
      position: absolute;
      color: gold;
      animation: twinkle 1.5s infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.2); }
    }
    
    .rarity-badge {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(255,215,0,0.9);
      color: #333;
      padding: 2px 6px;
      border-radius: 8px;
      font-size: 10px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-8">
  <div class="w-full max-w-7xl">
    <!-- 标题 -->
    <h1 class="text-5xl font-bold text-white text-center mb-8 drop-shadow-lg">
      ✨ 课堂问答抽卡系统 ✨
    </h1>
    
    <!-- 抽中的卡片显示区 -->
    <div class="drawn-display mb-8" id="drawnDisplay">
      <div class="text-white text-2xl text-center" id="placeholder">
        <div class="text-4xl mb-2">🎴</div>
        点击下方"随机抽卡"按钮开始
      </div>
    </div>
    
    <!-- 卡片容器 -->
    <div class="cards-container mb-8" id="cardsContainer">
      <!-- 卡片将通过 JavaScript 生成 -->
    </div>
    
    <!-- 控制按钮 -->
    <div class="flex justify-center gap-4">
      <button 
        id="drawBtn"
        class="px-8 py-4 bg-yellow-400 hover:bg-yellow-500 text-gray-800 font-bold text-xl rounded-full shadow-lg transform hover:scale-105 transition-all duration-200 flex items-center gap-2"
      >
        <span class="text-2xl">🎲</span>
        <span>随机抽卡</span>
      </button>
      <button 
        id="resetBtn"
        class="px-8 py-4 bg-white hover:bg-gray-100 text-gray-800 font-bold text-xl rounded-full shadow-lg transform hover:scale-105 transition-all duration-200 flex items-center gap-2"
      >
        <span class="text-2xl">🔄</span>
        <span>重置</span>
      </button>
    </div>
    
    <!-- 统计信息 -->
    <div class="text-center mt-6 text-white text-lg">
      <span>剩余卡片: <span id="remainingCount" class="font-bold text-2xl text-yellow-300">49</span> / 49</span>
    </div>
  </div>

  <script>
    const totalCards = 49;
    let availableCards = [];
    let drawnCards = [];
    
    // 学生信息（可以自定义姓名和头像）
    const students = Array.from({length: totalCards}, (_, i) => ({
      id: i + 1,
      name: `学生${i + 1}号`,
      // 使用 DiceBear API 生成随机头像，每个学号对应一个固定头像
      avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${i + 1}`
    }));
    
    // 初始化卡片
    function initCards() {
      availableCards = Array.from({length: totalCards}, (_, i) => i);
      drawnCards = [];
      renderCards();
      updateCount();
      clearDrawnDisplay();
    }
    
    // 渲染卡片
    function renderCards() {
      const container = document.getElementById('cardsContainer');
      container.innerHTML = '';
      
      const centerX = container.offsetWidth / 2;
      const centerY = container.offsetHeight / 2;
      const radius = 200;
      
      availableCards.forEach((cardIndex, index) => {
        const student = students[cardIndex];
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.index = cardIndex;
        
        // 计算卡片位置，呈扇形排列
        const totalAvailable = availableCards.length;
        const angle = (index / totalAvailable) * Math.PI - Math.PI / 2;
        const rotation = (index - totalAvailable / 2) * 2;
        
        const x = centerX + Math.cos(angle) * radius - 60;
        const y = centerY + Math.sin(angle) * radius * 0.5 - 80;
        
        card.style.left = `${x}px`;
        card.style.top = `${y}px`;
        card.style.transform = `rotate(${rotation}deg)`;
        card.style.zIndex = index;
        card.style.setProperty('--rotation', `${rotation}deg`);
        
        card.innerHTML = `
          <div class="card-inner">
            <div class="card-front">
              <div class="text-white text-6xl mb-2">❓</div>
              <div class="text-white text-xs font-bold">MYSTERY</div>
            </div>
            <div class="card-back">
              <div class="rarity-badge">★ SR</div>
              <img src="${student.avatar}" alt="${student.name}" class="avatar mb-2">
              <div class="text-gray-800 text-xs font-bold text-center px-1">${student.name}</div>
              <div class="text-purple-600 text-lg font-bold mt-1">No.${student.id}</div>
            </div>
          </div>
        `;
        
        container.appendChild(card);
      });
    }
    
    // 抽卡
    function drawCard() {
      if (availableCards.length === 0) {
        alert('所有卡片已抽完！请重置。');
        return;
      }
      
      // 禁用按钮
      document.getElementById('drawBtn').disabled = true;
      
      // 随机选择一张卡
      const randomIndex = Math.floor(Math.random() * availableCards.length);
      const drawnIndex = availableCards[randomIndex];
      const student = students[drawnIndex];
      
      // 从可用卡片中移除
      availableCards.splice(randomIndex, 1);
      drawnCards.push(drawnIndex);
      
      // 显示抽中的卡片
      showDrawnCard(student);
      
      // 延迟后重新渲染剩余卡片
      setTimeout(() => {
        renderCards();
        updateCount();
        document.getElementById('drawBtn').disabled = false;
      }, 1000);
    }
    
    // 显示抽中的卡片
    function showDrawnCard(student) {
      const display = document.getElementById('drawnDisplay');
      display.innerHTML = `
        <div class="result-card">
          <div class="star-decoration" style="top: 10px; left: 20px; font-size: 24px;">⭐</div>
          <div class="star-decoration" style="top: 10px; right: 20px; font-size: 24px; animation-delay: 0.3s;">⭐</div>
          <div class="star-decoration" style="bottom: 20px; left: 30px; font-size: 20px; animation-delay: 0.6s;">✨</div>
          <div class="star-decoration" style="bottom: 20px; right: 30px; font-size: 20px; animation-delay: 0.9s;">✨</div>
          
          <img src="${student.avatar}" alt="${student.name}" class="result-avatar">
          
          <div class="z-10 mt-4 text-center">
            <div class="text-gray-500 text-sm mb-1">恭喜抽中</div>
            <div class="text-3xl font-bold text-gray-800 mb-2">${student.name}</div>
            <div class="inline-block bg-purple-600 text-white px-4 py-2 rounded-full text-xl font-bold mb-3">
              学号 ${student.id}
            </div>
            <div class="text-gray-600 text-sm">请这位同学回答问题 🎤</div>
          </div>
          
          <div class="absolute bottom-4 text-xs text-gray-400">
            ★★★ SUPER RARE ★★★
          </div>
        </div>
      `;
    }
    
    // 清空显示区
    function clearDrawnDisplay() {
      const display = document.getElementById('drawnDisplay');
      display.innerHTML = `
        <div class="text-white text-2xl text-center" id="placeholder">
          <div class="text-4xl mb-2">🎴</div>
          点击下方"随机抽卡"按钮开始
        </div>
      `;
    }
    
    // 更新计数
    function updateCount() {
      document.getElementById('remainingCount').textContent = availableCards.length;
    }
    
    // 事件监听
    document.getElementById('drawBtn').addEventListener('click', drawCard);
    document.getElementById('resetBtn').addEventListener('click', initCards);
    
    // 初始化
    initCards();
  </script>
</body>
</html>