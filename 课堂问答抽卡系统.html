<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¯¾å ‚é—®ç­”æŠ½å¡ç³»ç»Ÿ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .card {
      width: 120px;
      height: 160px;
      position: absolute;
      transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      cursor: pointer;
      transform-style: preserve-3d;
    }
    
    .card:hover {
      transform: translateY(-10px) rotate(var(--rotation)) !important;
    }
    
    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    
    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }
    
    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 16px rgba(0,0,0,0.4);
      border: 3px solid rgba(255,255,255,0.3);
    }
    
    .card-front {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .card-back {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      transform: rotateY(180deg);
      padding: 8px;
    }
    
    .selected-card {
      animation: drawCard 1s ease-out forwards;
      z-index: 1000 !important;
    }
    
    @keyframes drawCard {
      0% {
        transform: translate(0, 0) scale(1) rotate(var(--rotation));
      }
      50% {
        transform: translate(0, -100px) scale(1.2) rotate(0deg);
      }
      100% {
        transform: translate(0, 0) scale(2) rotate(0deg);
      }
    }
    
    .cards-container {
      position: relative;
      width: 100%;
      height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .drawn-display {
      min-height: 280px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .result-card {
      width: 280px;
      height: 380px;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.4);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      animation: showResult 0.6s ease-out;
      border: 4px solid rgba(255,255,255,0.8);
      position: relative;
      overflow: hidden;
    }
    
    .result-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 120px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      z-index: 0;
    }
    
    @keyframes showResult {
      from {
        opacity: 0;
        transform: scale(0.8) rotateY(90deg);
      }
      to {
        opacity: 1;
        transform: scale(1) rotateY(0deg);
      }
    }
    
    .avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid white;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    .result-avatar {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      object-fit: cover;
      border: 5px solid white;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      z-index: 1;
      margin-top: 20px;
    }
    
    .star-decoration {
      position: absolute;
      color: gold;
      animation: twinkle 1.5s infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.2); }
    }
    
    .rarity-badge {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(255,215,0,0.9);
      color: #333;
      padding: 2px 6px;
      border-radius: 8px;
      font-size: 10px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-8">
  <div class="w-full max-w-7xl">
    <!-- æ ‡é¢˜ -->
    <h1 class="text-5xl font-bold text-white text-center mb-8 drop-shadow-lg">
      âœ¨ è¯¾å ‚é—®ç­”æŠ½å¡ç³»ç»Ÿ âœ¨
    </h1>
    
    <!-- æŠ½ä¸­çš„å¡ç‰‡æ˜¾ç¤ºåŒº -->
    <div class="drawn-display mb-8" id="drawnDisplay">
      <div class="text-white text-2xl text-center" id="placeholder">
        <div class="text-4xl mb-2">ğŸ´</div>
        ç‚¹å‡»ä¸‹æ–¹"éšæœºæŠ½å¡"æŒ‰é’®å¼€å§‹
      </div>
    </div>
    
    <!-- å¡ç‰‡å®¹å™¨ -->
    <div class="cards-container mb-8" id="cardsContainer">
      <!-- å¡ç‰‡å°†é€šè¿‡ JavaScript ç”Ÿæˆ -->
    </div>
    
    <!-- æ§åˆ¶æŒ‰é’® -->
    <div class="flex justify-center gap-4">
      <button 
        id="drawBtn"
        class="px-8 py-4 bg-yellow-400 hover:bg-yellow-500 text-gray-800 font-bold text-xl rounded-full shadow-lg transform hover:scale-105 transition-all duration-200 flex items-center gap-2"
      >
        <span class="text-2xl">ğŸ²</span>
        <span>éšæœºæŠ½å¡</span>
      </button>
      <button 
        id="resetBtn"
        class="px-8 py-4 bg-white hover:bg-gray-100 text-gray-800 font-bold text-xl rounded-full shadow-lg transform hover:scale-105 transition-all duration-200 flex items-center gap-2"
      >
        <span class="text-2xl">ğŸ”„</span>
        <span>é‡ç½®</span>
      </button>
    </div>
    
    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <div class="text-center mt-6 text-white text-lg">
      <span>å‰©ä½™å¡ç‰‡: <span id="remainingCount" class="font-bold text-2xl text-yellow-300">49</span> / 49</span>
    </div>
  </div>

  <script>
    const totalCards = 49;
    let availableCards = [];
    let drawnCards = [];
    
    // å­¦ç”Ÿä¿¡æ¯ï¼ˆå¯ä»¥è‡ªå®šä¹‰å§“åå’Œå¤´åƒï¼‰
    const students = Array.from({length: totalCards}, (_, i) => ({
      id: i + 1,
      name: `å­¦ç”Ÿ${i + 1}å·`,
      // ä½¿ç”¨ DiceBear API ç”Ÿæˆéšæœºå¤´åƒï¼Œæ¯ä¸ªå­¦å·å¯¹åº”ä¸€ä¸ªå›ºå®šå¤´åƒ
      avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${i + 1}`
    }));
    
    // åˆå§‹åŒ–å¡ç‰‡
    function initCards() {
      availableCards = Array.from({length: totalCards}, (_, i) => i);
      drawnCards = [];
      renderCards();
      updateCount();
      clearDrawnDisplay();
    }
    
    // æ¸²æŸ“å¡ç‰‡
    function renderCards() {
      const container = document.getElementById('cardsContainer');
      container.innerHTML = '';
      
      const centerX = container.offsetWidth / 2;
      const centerY = container.offsetHeight / 2;
      const radius = 200;
      
      availableCards.forEach((cardIndex, index) => {
        const student = students[cardIndex];
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.index = cardIndex;
        
        // è®¡ç®—å¡ç‰‡ä½ç½®ï¼Œå‘ˆæ‰‡å½¢æ’åˆ—
        const totalAvailable = availableCards.length;
        const angle = (index / totalAvailable) * Math.PI - Math.PI / 2;
        const rotation = (index - totalAvailable / 2) * 2;
        
        const x = centerX + Math.cos(angle) * radius - 60;
        const y = centerY + Math.sin(angle) * radius * 0.5 - 80;
        
        card.style.left = `${x}px`;
        card.style.top = `${y}px`;
        card.style.transform = `rotate(${rotation}deg)`;
        card.style.zIndex = index;
        card.style.setProperty('--rotation', `${rotation}deg`);
        
        card.innerHTML = `
          <div class="card-inner">
            <div class="card-front">
              <div class="text-white text-6xl mb-2">â“</div>
              <div class="text-white text-xs font-bold">MYSTERY</div>
            </div>
            <div class="card-back">
              <div class="rarity-badge">â˜… SR</div>
              <img src="${student.avatar}" alt="${student.name}" class="avatar mb-2">
              <div class="text-gray-800 text-xs font-bold text-center px-1">${student.name}</div>
              <div class="text-purple-600 text-lg font-bold mt-1">No.${student.id}</div>
            </div>
          </div>
        `;
        
        container.appendChild(card);
      });
    }
    
    // æŠ½å¡
    function drawCard() {
      if (availableCards.length === 0) {
        alert('æ‰€æœ‰å¡ç‰‡å·²æŠ½å®Œï¼è¯·é‡ç½®ã€‚');
        return;
      }
      
      // ç¦ç”¨æŒ‰é’®
      document.getElementById('drawBtn').disabled = true;
      
      // éšæœºé€‰æ‹©ä¸€å¼ å¡
      const randomIndex = Math.floor(Math.random() * availableCards.length);
      const drawnIndex = availableCards[randomIndex];
      const student = students[drawnIndex];
      
      // ä»å¯ç”¨å¡ç‰‡ä¸­ç§»é™¤
      availableCards.splice(randomIndex, 1);
      drawnCards.push(drawnIndex);
      
      // æ˜¾ç¤ºæŠ½ä¸­çš„å¡ç‰‡
      showDrawnCard(student);
      
      // å»¶è¿Ÿåé‡æ–°æ¸²æŸ“å‰©ä½™å¡ç‰‡
      setTimeout(() => {
        renderCards();
        updateCount();
        document.getElementById('drawBtn').disabled = false;
      }, 1000);
    }
    
    // æ˜¾ç¤ºæŠ½ä¸­çš„å¡ç‰‡
    function showDrawnCard(student) {
      const display = document.getElementById('drawnDisplay');
      display.innerHTML = `
        <div class="result-card">
          <div class="star-decoration" style="top: 10px; left: 20px; font-size: 24px;">â­</div>
          <div class="star-decoration" style="top: 10px; right: 20px; font-size: 24px; animation-delay: 0.3s;">â­</div>
          <div class="star-decoration" style="bottom: 20px; left: 30px; font-size: 20px; animation-delay: 0.6s;">âœ¨</div>
          <div class="star-decoration" style="bottom: 20px; right: 30px; font-size: 20px; animation-delay: 0.9s;">âœ¨</div>
          
          <img src="${student.avatar}" alt="${student.name}" class="result-avatar">
          
          <div class="z-10 mt-4 text-center">
            <div class="text-gray-500 text-sm mb-1">æ­å–œæŠ½ä¸­</div>
            <div class="text-3xl font-bold text-gray-800 mb-2">${student.name}</div>
            <div class="inline-block bg-purple-600 text-white px-4 py-2 rounded-full text-xl font-bold mb-3">
              å­¦å· ${student.id}
            </div>
            <div class="text-gray-600 text-sm">è¯·è¿™ä½åŒå­¦å›ç­”é—®é¢˜ ğŸ¤</div>
          </div>
          
          <div class="absolute bottom-4 text-xs text-gray-400">
            â˜…â˜…â˜… SUPER RARE â˜…â˜…â˜…
          </div>
        </div>
      `;
    }
    
    // æ¸…ç©ºæ˜¾ç¤ºåŒº
    function clearDrawnDisplay() {
      const display = document.getElementById('drawnDisplay');
      display.innerHTML = `
        <div class="text-white text-2xl text-center" id="placeholder">
          <div class="text-4xl mb-2">ğŸ´</div>
          ç‚¹å‡»ä¸‹æ–¹"éšæœºæŠ½å¡"æŒ‰é’®å¼€å§‹
        </div>
      `;
    }
    
    // æ›´æ–°è®¡æ•°
    function updateCount() {
      document.getElementById('remainingCount').textContent = availableCards.length;
    }
    
    // äº‹ä»¶ç›‘å¬
    document.getElementById('drawBtn').addEventListener('click', drawCard);
    document.getElementById('resetBtn').addEventListener('click', initCards);
    
    // åˆå§‹åŒ–
    initCards();
  </script>
</body>
</html>